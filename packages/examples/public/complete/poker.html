<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script lang="text/js" defer>
        window.__unocss = {
            theme: {
                colors: {
                    nytimes: {
                        green: '#6aaa64',
                        yellow: '#c9b458',
                        blue: '#385898',
                        red: '#cc0000'
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@unocss/runtime"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@unocss/reset/tailwind.min.css" />
</head>

<body>
    <div id="app"></div>

    <script type="module" defer>
        import {
            MotionPlugin,
            useMotion,
        } from 'https://cdn.jsdelivr.net/npm/@vueuse/motion@2.2.6/+esm';

        const { ref, computed, createApp } = Vue;

        const app = createApp({
            setup() {
                const cards = ref([]);
                const playerHand = ref([]);
                const dealerHand = ref([]);
                const gameState = ref('initial'); // initial, playing, ended
                const result = ref('');

                const suits = ['♠', '♥', '♣', '♦'];
                const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

                const initializeDeck = () => {
                    cards.value = [];
                    for (let suit of suits) {
                        for (let value of values) {
                            cards.value.push({ suit, value });
                        }
                    }
                    // Shuffle
                    cards.value.sort(() => Math.random() - 0.5);
                };

                const dealCards = () => {
                    playerHand.value = [cards.value.pop(), cards.value.pop()];
                    dealerHand.value = [cards.value.pop(), cards.value.pop()];
                    gameState.value = 'playing';
                };

                const fold = () => {
                    result.value = 'You folded!';
                    gameState.value = 'ended';
                };

                const call = () => {
                    // Simplified poker logic for demo
                    const playerScore = Math.random();
                    const dealerScore = Math.random();

                    result.value = playerScore > dealerScore ?
                        'You win!' :
                        'Dealer wins!';
                    gameState.value = 'ended';
                };

                const newGame = () => {
                    initializeDeck();
                    dealCards();
                    result.value = '';
                };

                // Initial setup
                initializeDeck();

                return {
                    playerHand,
                    dealerHand,
                    gameState,
                    result,
                    fold,
                    call,
                    newGame
                };
            },
            template: `
          <div class="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
            <h1 class="text-4xl font-bold mb-8 text-nytimes-blue">NY Times Poker</h1>
            
            <div v-if="gameState === 'initial'" 
                 v-motion="{ initial: { scale: 0.8, opacity: 0 }, enter: { scale: 1, opacity: 1 } }"
                 class="flex flex-col items-center">
              <button @click="newGame" 
                      class="bg-nytimes-blue text-white px-6 py-3 rounded-lg text-xl hover:bg-opacity-90">
                Start Game
              </button>
            </div>

            <div v-if="gameState === 'playing'" 
                 class="w-full max-w-2xl">
              <div class="mb-8 text-center">
                <h2 class="text-xl mb-2">Dealer's Hand</h2>
                <div v-motion="{ initial: { y: -20, opacity: 0 }, enter: { y: 0, opacity: 1 } }"
                     class="flex justify-center gap-4">
                  <div v-for="card in dealerHand" 
                       class="bg-white p-4 rounded-lg shadow-lg w-24 h-32 flex items-center justify-center text-2xl"
                       :class="card.suit === '♥' || card.suit === '♦' ? 'text-nytimes-red' : 'text-gray-900'">
                    {{ card.value }}{{ card.suit }}
                  </div>
                </div>
              </div>

              <div class="mb-8 text-center">
                <h2 class="text-xl mb-2">Your Hand</h2>
                <div v-motion="{ initial: { y: 20, opacity: 0 }, enter: { y: 0, opacity: 1 } }"
                     class="flex justify-center gap-4">
                  <div v-for="card in playerHand" 
                       class="bg-white p-4 rounded-lg shadow-lg w-24 h-32 flex items-center justify-center text-2xl"
                       :class="card.suit === '♥' || card.suit === '♦' ? 'text-nytimes-red' : 'text-gray-900'">
                    {{ card.value }}{{ card.suit }}
                  </div>
                </div>
              </div>

              <div class="flex justify-center gap-4">
                <button @click="fold" 
                        class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-opacity-90">
                  Fold
                </button>
                <button @click="call" 
                        class="bg-nytimes-green text-white px-6 py-3 rounded-lg hover:bg-opacity-90">
                  Call
                </button>
              </div>
            </div>

            <div v-if="gameState === 'ended'" 
                 v-motion="{ initial: { scale: 0.8, opacity: 0 }, enter: { scale: 1, opacity: 1 } }"
                 class="text-center">
              <h2 class="text-2xl mb-4">{{ result }}</h2>
              <button @click="newGame" 
                      class="bg-nytimes-blue text-white px-6 py-3 rounded-lg hover:bg-opacity-90">
                Play Again
              </button>
            </div>
          </div>
        `,
        });

        app.use(MotionPlugin);
        app.mount('#app');
    </script>
</body>

</html>